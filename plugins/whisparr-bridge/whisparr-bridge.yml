name: Whisparr Bridge
description: Add matched StashDB scene to Whisparr on update
version: 1.0
exec:
  - python
  - "{pluginDir}/whisparr-bridge.py"
interface: raw

hooks:
  - name: Add on scene update
    triggeredBy:
      - Scene.Update.Post
tasks:
  - name: "Sync All Scenes to Whisparr"
    description: Syncs all the scenes in the database to Whisparr
    defaultArgs:
      mode: bulk
settings:
  WHISPARR_URL:
    displayName: Whisparr URL
    type: STRING
  WHISPARR_KEY:
    displayName: Whisparr API Key
    type: STRING
  STASHDB_ENDPOINT_SUBSTR:
    displayName: StashDB host match (e.g. stashdb.org)
    description: Only change this if whisparr adds custom stashbox support
    type: STRING
  MONITORED:
    displayName: Monitor after add
    description: Mark the scene as monitored when synced
    type: BOOLEAN
  MOVE_FILES:
    displayName: Move Files
    description: Move files after processing
    type: BOOLEAN

  WHISPARR_RENAME:
    displayName: Enable Whisparr Rename
    description: Rename files using Whisparr conventions
    type: BOOLEAN

  QUALITY_PROFILE:
    displayName: Quality Profile
    description: Default quality profile for downloads
    type: STRING

  ROOT_FOLDER:
    displayName: Root Folder
    description: Optional root folder for downloads
    type: STRING

  IGNORE_TAGS:
    displayName: Ignore Tags
    description: List of tags to ignore when adding
    type: STRING

  # =========================
  # Logging Configuration
  # =========================
  LOG_LEVEL:
    displayName: Log Level
    description: Stash / console logging level
    type: STRING

  LOG_FILE_ENABLE:
    displayName: Enable File Logging
    description: Enable logging to file
    type: BOOLEAN

  LOG_FILE_LEVEL:
    displayName: File Log Level
    description: Logging level for file output
    type: STRING

  LOG_FILE_LOCATION:
    displayName: File Log Location
    description: Directory Path for logs
    type: STRING

  LOG_FILE_USE_COLOR:
    displayName: Use Color in Logs
    description: Apply ANSI color codes in file logs
    type: BOOLEAN

  MAX_LOG_BODY:
    displayName: Max Log Body
    description: Maximum number of characters to log per message
    type: NUMBER

  MAX_PATH_LENGTH:
    displayName: Max Path Length
    description: Maximum length of file paths in logs
    type: NUMBER